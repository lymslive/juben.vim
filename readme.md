# 白话剧本 vim 编辑辅助脚本

## 剧本格式

使用 `.md` 文档。一级标题 `#` 表示剧本名字，二级标题 `##` 表示小节标题。

小节标题格式如下：

```
## 0 【序幕】
## 1 【第一场】
```

小节采用硬编号，序幕从 0 开始编号。实际标题放在中黑括号 `【】` 中。标题主要起
概括内容之用，也是将长篇幅按逻辑内容切分的手段，利于分节管理与编辑。

小节标题之后用 markdown 的列表写出该场景的时间地点。

```
* 时间
* 地点
```

如果是按电影剧本写作，一节中可能涉及多个场景切换。若此可以在每次切景时重复写出
时间地点列表。如果按话剧或戏曲舞台剧本，一般可遵从强三一律，一节标题只在一个场
景演绎。

剧本内容主要包括台词与描叙，戏曲剧本还有唱词与曲牌，暂且不论。

```
（行外描叙，纯粹的描叙，写景，写人物动作

人名：台词说说说……（表情、小动作提示）……继续说说说
```

台词段落用全角冒号 `：` 分隔说话人物名与说话内容。中间若有夹杂描叙，用小括号
`（）`区分于台词。但是整段的行外描叙，只在最前面用左小括号，而不必有右小括号。

## 可用脚本

当前几乎所有脚本假设剧本正文写在 `main.md` 文档中。

小标题重编号 `renumber.vim` 假定必有序幕，从 0 开始。

统计脚本 `stats.vim` 能从正文中生成两个文档，一个是小节标题列表 `title.md` ，
会提取小节编号、标题及（第一个场景的）时间、地点，按 markdown 的表格格式输出。

另一个输出文档是 `stats.md` ，会列出各个出场人物的台词量统计，并从多到少排序。
一般可认为台词多的是主角。最后也会给出总台词量（字数）与（两类）描叙文字量，其
各是正文总字数。显然总字数不包括格式文字，以及每名台词前重复的人物名字。

静态网页格式化脚本 `tohmtl.vim` 将 `main.md` 转换为 `main.html` ，网页模板与样
式在 `juben.html` 。输出的静态网页可以提交到 github page （如 gh-pages 分支）
。

makefile 封装了使用 vim 的批处理模式，调用脚本对剧本源文件进行处理。

## 使用指引

如果将每个剧本项目建立一个 github 仓库，可将该仓库当作子剧本的子模块使用。或者
在本地建立软链接也可。
